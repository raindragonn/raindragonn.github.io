---
layout: "post"
title: "웹 기본 지식 - HTTP"
subtitle: "웹 기본 지식 - HTTP"
date: 2023-08-17
author: "raindragonn"
lang: ko
categories: [CS]
tags:
  - CS
  - HTTP
---

## 모든 것이 HTTP

### HyperText Transfer Protocol

- **현재는 거의 모든 것을 전송이 가능하며, 대부분을 HTTP를 사용한다.**
    - HTML, TEXT
    - IMAGE, 음성, 영상, 파일
    - JSON, XML(API)

### 역사

- HTTP/0.9 1991년: GET 메서드만 지원, HTTP 헤더X
- HTTP/1.0 1996년: 메서드, 헤더 추가
- **HTTP/1.1 1997년: 가장 많이 사용, 우리에게 가장 중요한 버전**
    - RFC2068 (1997) -> RFC2616 (1999) -> RFC7230~7235 (2014)
- HTTP/2 2015년: 성능 개선
- HTTP/3 진행중: TCP 대신에 UDP 사용, 성능 개선

### 기반 프로토콜

- **TCP**: HTTP/1.1, HTTP/2
- **UDP**: HTTP/3
- 현재 HTTP/1.1을 주로 사용
    - 2, 3 도 점점 증가

**[ 확인 방법 ]** 

- Chrome 브라우저 → 개발자 모드 → network → protocol 확인 가능

### 특징

- 클라이언트 서버 구조
- 무상태 프로토콜(Stateless), 비연결성
- HTTP 메시지를 통해 통신
- 단순함, 확장 가능

## 클라이언트 서버 구조

- Request/ Response 구조
    - 요청과 응답
- 클라이언트는 서버에 요청을 보내고 응답을 대기한다.
- 서버가 요청에 대한 결과를 만들어서 응답
- **클라이언트, 서버 구조로 인해 각각 독립적으로 기술 고도화가 가능**
    - 비즈니스 로직, 데이터 구조는 서버
    - 복잡한 비즈니스 로직을 제외한 UI, UX는 클라이언트

### 무상태 프로토콜 (**Stateless**)

- **서버가 클라이언트의 상태를 보존하지 않는다.**
- 장점: 서버 확장성 높음(스케일 아웃)
- 단점: 클라이언트가 추가 데이터 전송

### Stateless와 Stateful 비교

- **상태 유지(Stateful)**: 중간에 서버가 변경되면 안된다.
    - 클라이언트의 요청에 따른 상태값을 알고 있어야 한다.
- **무상태(Stateless)**: 중간에 서버가 변경되어도 문제가 되지 않는다.
    - 클라이언트의 요청이 많아져도 다른 서버를 사용할 수 있다.
- 무상태는 응답 서버를 쉽게 바꿀 수 있다. → **무한한 서버 증설 가능**

### 무상태(Stateless)의 한계

- 불가능한 경우 - 로그인 (상태유지)
- 로그인한 사용자의 경우 로그인 했다는 상태를 서버에 유지해야한다.
- 일반적으로 브라우저 쿠키와 서버 세션등을 사용해서 상태를 유지한다.
- 상태 유지는 최소한으로 사용한다.

## 비 연결성(Connectionless)

### 연결을 유지하는 모델

- TCP/IP 연결
- 여러 클라이언트가 하나의 서버에 연결을 유지하는 경우 서버는 계속해서 자원을 소모한다.

### 연결을 유지하지 않는 모델

- TCP/IP 연결
- 여러 클라이언트의 요청에 대한 응답 이후 연결을 유지하지 않는다.

### 비 연결성의 특징

- HTTP는 기본이 연결을 유지하지 않는 모델이다.
- 일반적으로 초 단위의 이하의 빠른 속도로 응답한다.
- 서버 자원을 매우 효율적으로 사용할 수 있음.

### 비 연결성의 한계와 극복

- TCP/IP 연결을 새로 맺어야 한다.
    - 계속해서 새로운 3 Way Handshake로 시간 추가
- 웹 브라우저로 사이트를 요청하면 HTML, JS, CSS 추가 이미지 등 수 많은 자원이 함께 다운로드
- 지금은 HTTP 지속 연결(Persistent Connections)로 문제 해결
    - HTTP/2, HTTP/3에서 더 많은 최적화

## HTTP 메시지

### 구조

- **state-line**
    - **[ 요청 메시지 ] request-line**
        - HTTP 메서드(GET, POST 등)
            - 서버가 수행해야 할 동작을 지정한다.
        - 요청 대상 ( /search?q=hello&hl=ko)
            - “/” 절대경로로 시작하는 경로
        - HTTP 버전
    - **[ 응답 메시지 ] status-line**
        - HTTP 버전
        - HTTP 상태 코드(2XX, 4XX, 5XX 등)
        - 이유 문귀 사람이 이애할 수 있는 짧은 상태 코드 설명 글
- **header**
    - header-field:filed-value 의 형태
    - **HTTP 전송에 필요한 모든 부가정보를 나타낸다.**
        - 메시지 바디의 내용, 메시지 바디의 크기, 압축, 인증, 요청 클아이언트(브라우저)정보, 서버 애플리케이션 정보, 캐시 관리 정보 등
- **empty line (CRLF)**
- **message body**
    - 실제 전송할 데이터
    - HTML 문서, 이미지, 영상, JSON 등등 byte로 표현할 수 있는 모든 데이터 전송 가능